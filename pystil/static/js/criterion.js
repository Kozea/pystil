// Generated by CoffeeScript 1.6.2
(function() {
  var commands;

  commands = {
    INFO: function(m) {
      return console.log(m);
    },
    VISIT: function(m) {
      var $line;

      $line = $(m);
      $line.addClass('recent');
      $('table.last tbody').append($line);
      setTimeout((function() {
        return $line.removeClass('recent');
      }), 500);
      $('header h1 a').addClass('pulse');
      return setTimeout((function() {
        return $('header h1 a').removeClass('pulse');
      }), 75);
    }
  };

  $(function() {
    var criterion, host, query_ws, value;

    if (!$('.criterion').size() || !_query_criterion || !_query_value) {
      return;
    }
    criterion = _query_criterion;
    value = _query_value;
    host = location.host;
    if (host.indexOf(':')) {
      host = host.split(':')[0];
    }
    window.query_ws = query_ws = new WebSocket("ws://" + host + ":" + window._pystil_port + "/query");
    query_ws.onopen = function() {
      console.log('Websocket opened', arguments);
      return query_ws.send("criterion|" + criterion + "|" + value);
    };
    query_ws.onerror = function() {
      return console.log('Websocket errored', arguments);
    };
    return query_ws.onmessage = function(evt) {
      return console.log(evt.data);
    };
  });

}).call(this);

/*
//@ sourceMappingURL=criterion.map
*/
